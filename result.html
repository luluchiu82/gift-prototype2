<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>é€ç¦®å®Œæˆ</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body>
<header>
  <h1 class="logo">é€ç¦®å®Œæˆ ğŸ</h1>
</header>
<main class="menu">
  <div id="card" class="card-preview" style="text-align:left;padding:20px;"></div>
  <button class="btn-main" onclick="generateImage()">ç”Ÿæˆå¡ç‰‡åœ–ç‰‡</button>
  <img id="finalImage" style="margin-top:15px;">
  <p>åˆ†äº«é€£çµï¼š</p>
  <p id="shareLink" style="word-break:break-all;"></p>
</main>

<script>
const gift = sessionStorage.getItem('gift');
const recipient = sessionStorage.getItem('recipient');
const message = sessionStorage.getItem('message');
const color = sessionStorage.getItem('color') || '#ffffff';

const card = document.getElementById('card');
card.style.background = color;
card.innerHTML = `<h3>ğŸ ${gift}</h3><p style="white-space: pre-wrap;">${message}</p><p style="font-size:14px;color:#888;">â€” ${recipient}</p>`;

function generateImage(){
  html2canvas(card).then(canvas=>{
    const imgData = canvas.toDataURL('image/png');
    document.getElementById('finalImage').src = imgData;
    document.getElementById('shareLink').innerText = "https://mygift.app/share/"+Math.random().toString(36).substr(2,6);
  });
}
</script>
</body>
</html>
